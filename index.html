<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JMP/LIMS Data Extraction Tool (JET)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fdfdfd; }
    header { background: #007c89; color: white; padding: 15px; text-align: center; }
    header h1 { margin: 0; font-size: 22px; }
    .container { padding: 20px; display: grid; grid-template-columns: 1fr; gap: 20px; }
    .section { border: 1px solid #ccc; border-radius: 8px; padding: 15px; background: #fff; }
    .section h3 { margin-top: 0; color: #007c89; }
    .flex-row { display: flex; gap: 20px; flex-wrap: nowrap; }
    label { margin-right: 10px; }
    input[type="date"], button, select { margin: 5px 0; padding: 5px; }
    .scroll-box { border: 1px solid #ccc; height: 150px; overflow-y: scroll; padding: 5px; font-size: 14px; }
    .small-btn { margin: 3px; padding: 4px 8px; font-size: 12px; }
    .block { flex: 1; min-width: 200px; }
    .system-info { padding: 10px; font-size: 12px; width: 320px; }
  </style>
</head>
<body>
<header>
  <h1>JMP/LIMS Data Extraction Tool (JET)</h1>
</header>

<div class="container">

  <div class="flex-row">
    <div class="section flex-row">
      <div class="block">
        <h3>Data Type</h3>
        <label><input type="radio" name="datatype"> Batch Release</label><br>
        <label><input type="radio" name="datatype"> Stability</label>
      </div>
      <div class="block">
        <h3>Reference Type</h3>
        <label><input type="radio" name="reftype"> Manufacturing Date</label><br>
        <label><input type="radio" name="reftype"> Study Start Date</label>
      </div>
      <div class="block">
        <h3>Reference Period</h3>
        <label>Start Date: <input type="date"></label><br>
        <label>End Date: <input type="date"></label>
      </div>
    </div>

    <div class="section flex-row">
      <div class="block">
        <h3>Stacked Output</h3>
        <label><input type="radio" name="stacked"> Final values</label><br>
        <label><input type="radio" name="stacked"> Final and Replicates</label><br>
        <button id="btn-stacked">Create Table</button>
      </div>
      <div class="block">
        <h3>Split Output</h3>
        <p style="font-size: 12px;">Numeric final values only</p>
        <button id="btn-split">Create Table</button>
      </div>
    </div>

    <div class="section flex-row">
      <div class="system-info">
        <h3 style="color: #555">GMP Regulated - Version 3.1 20Dec2024</h3>
        <h3 style="color: #555">User: L042000</h3>
        <h3 style="color: #555">Environment: Prod</h3>
        <h3 style="color: #555">Source Data Updated as of 22Sept2025</h3>
      </div>
    </div>
  </div>

  <div class="section flex-row">
    <div class="block">
      <h3>Select Facility</h3>
      <button class="small-btn">Select All</button>
      <button class="small-btn">Deselect All</button>
      <div class="scroll-box">
        <label><input type="checkbox"> 0003 - Kinsale Bulk MFG, IE</label><br>
        <label><input type="checkbox"> 0043 - Suzhou Pharma F/F/F, CN</label><br>
        <label><input type="checkbox"> 0111 - Manufacturing Indy Bulk</label><br>
        <label><input type="checkbox"> 0350 - DPEM (US)</label><br>
        <label><input type="checkbox"> 0490 - RTP Pharma MFG, NC, US</label><br>
      </div>
    </div>

    <div class="block">
      <h3>Select Material</h3>
      <button class="small-btn">Select All</button>
      <button class="small-btn">Deselect All</button>
      <div class="scroll-box">
        <label><input type="checkbox"> QA537N - LA426 PROTEIN A</label><br>
        <label><input type="checkbox"> QA554D - ABEMACICLIB</label>
      </div>
    </div>

    <div class="block">
      <h3>Select Material Details</h3>
      <button class="small-btn">Select All</button>
      <button class="small-btn">Deselect All</button>
      <div class="scroll-box">
        <label><input type="checkbox"> QA554D - ABEMACICLIB</label>
      </div>
    </div>
  </div>

  <div class="section flex-row">
    <div class="block">
      <h3>Select Property</h3>
      <button class="small-btn">Select All</button>
      <button class="small-btn">Deselect All</button>
      <div class="scroll-box">
        <label><input type="checkbox"> Crystal Form</label><br>
        <label><input type="checkbox"> Identity</label><br>
        <label><input type="checkbox"> Impurities - Total</label><br>
        <label><input type="checkbox"> Palladium (ppm)</label><br>
        <label><input type="checkbox"> Percent Activity</label><br>
        <label><input type="checkbox"> Residue on Ignition</label>
      </div>
    </div>

    <div class="block">
      <h3>Select Status</h3>
      <button class="small-btn">Select All</button>
      <button class="small-btn">Deselect All</button><br><br>
      <label><input type="checkbox"> Sample Status Approved</label><br>
      <label><input type="checkbox"> Test Status Approved</label><br>
      <label><input type="checkbox"> Result Status Approved</label>
    </div>
  </div>
</div>

<script>
  const dummyCSV = `Manufacturing Site,Material Number,Material Description,Batch ID,Manufacturing Date,Test Performed Date,Property Name,UOM,Storage Condition,Study Timepoint
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,31-Mar-10,Prop A,UOM 1,5C,0 Months
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,4-Nov-10,Prop A,UOM 2,5C,6 Months
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,27-Oct-10,Prop A,UOM 3,5C,6 Months
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,27-Apr-11,Prop A,UOM 4,5C,12 Months
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,20-Apr-11,Prop A,UOM 5,5C,12 Months
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,17-Oct-11,Prop A,UOM 6,5C,18 Months
"Kinsale Bulk MFG, IE",QA380G,TILMICOSIN AQUEOUS N.I.,A730641,22-Mar-10,25-Oct-11,Prop A,UOM 7,5C,18 Months`;

  function downloadCSV() {
    const blob = new Blob([dummyCSV], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'JET_output.csv';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  }
  function downloadCSVcopy() {
    const blob = new Blob([dummyCSV], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'JET_output_copy.jmp';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  }

  document.getElementById('btn-stacked').addEventListener('click', downloadCSV);
  document.getElementById('btn-split').addEventListener('click', downloadCSVcopy);
</script>

</body>
</html>
